<style>
#material {width:100%;}
#material tr, td {width:50%; vertical-align:middle; text-align:center;}
</style>
<link href="/common/mobiscroll.2.5.0.production/css/mobiscroll.custom-2.5.0.min.css" rel="stylesheet" type="text/css" />
<script src="/common/mobiscroll.2.5.0.production/js/mobiscroll.custom-2.5.0.min.js" type="text/javascript"></script>
<script>
$(function () {
    //alert("scroller");
    $('#date').mobiscroll().date({
        theme: 'android-ics', display: 'bottom', mode: 'scroller', dateOrder: 'yy mm dd', dateFormat: 'yy/mm/dd',
        endYear: 2050,
    });  
});

function submitform()
{
    //alert("submitform");    
    $("#dataform").submit();
}

function redirect(url) {
    window.location = url;
}
</script>
<?php
$data=$this->maindata;
$mode=$this->mode;//"Create";
$id=0;
$name="";
$nameeng="";
$spec="";
$description="";
$supplier="";
$price="";
$date="";
$suppliers=$this->suppliers;
$pic="";

if($mode==="Edit")
{
$id=$data->getId();
$name=$data->getName();
$nameeng=$data->getNameeng();
//$spec=$data->getSpec();
$description=$data->getDescription();
if($data->getSupplier())
{
    $supplier=$data->getSupplier()->getName();
}
$price=$data->getPrice();
$date=$data->getOnlinedate()->format('Y/m/d');
//$date=$data->getOnlinedate()->format('Y/m/d H:i:s');
$pic=$data->getPic();
}

?>

<form id="dataform" enctype="multipart/form-data" method="post" action="/material/manage/submit">
<input type="hidden" id="mode" name="mode" value="<?php echo $mode; ?>">
<input type="hidden" id="id" name="id" value="<?php echo $id; ?>">
<fieldset>
    <legend><strong>材料添加与编辑</strong></legend>
<table id="material">
<tr>
<td rowspan="3">
<div data-role="fieldcontain">
    <label for="file" class="ui-input-text">材料参考照片:</label>
    <input type="file" name="file" id="file">
    <img src="<?php echo $pic; ?>" alt="无照片显示" width="40%"  id="pic" name="pic">
</div>
</td>
<td>
<div data-role="fieldcontain">
<label for="name">中文名:</label>
<input type="text" name="name" id="name" value="<?php echo $name; ?>" data-mini="true">
</div>
</td>
</tr>
<tr><td>
<div data-role="fieldcontain">
<label for="name">英文名:</label>
<input type="text" name="nameeng" id="nameeng" value="<?php echo $nameeng; ?>" data-mini="true">
</div>
</td></tr>
<tr><td>
<div data-role="fieldcontain">
<label for="date">更新日期:</label>
<input type="text" name="date" id="date" value="<?php echo $date; ?>" data-mini="true">
</div>
</td></tr>
<tr><td>
<div data-role="fieldcontain">
<label for="supplier">供应商:</label>
<!--<input type="text" name="supplier" id="supplier" value="<?php echo $supplier; ?>" data-mini="true">-->
<select id="supplier" name="supplier">
<?php
foreach($suppliers as $tmp)
{
    $supid = $tmp->getId();
    $supname = $tmp->getName();    
    if($supname == $supplier)
    {
        echo '<option value="' . $supid . '" selected>' . $supname . '</option>';
    }
    else
    {
        echo '<option value="' . $supid . '" >' . $supname . '</option>';
    }    
}
?>
</select>
</div>
</td><td>
<div data-role="fieldcontain">
<label for="price">价格:</label>
<input type="text" name="price" id="price" value="<?php echo $price; ?>" data-mini="true">
</div>
</td></tr>
<tr><td>
<div data-role="fieldcontain">
<label for="spec">规格:</label>
<input type="text" name="spec" id="spec" value="<?php echo $spec; ?>" data-mini="true">
</div>
</td><td>
<div data-role="fieldcontain">
    <label for="description">材料描述:</label>
    <textarea id="description" name="description" rows="2" cols="60" data-mini="true"><?php echo $description; ?></textarea>
</div>
</td></tr>

</table>
</fieldset>
<button type="button" id="submitbutton" name="submitbutton" onclick="submitform()">Submit</button>

</form>
